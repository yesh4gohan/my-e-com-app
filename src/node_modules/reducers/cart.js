import { ADD_TO_CART_SUCCESS, REMOVE_FROM_CART_SUCCESS, ADD_TO_CART_FAILURE } from "actionTypes";
const initialState = [];

export default (state = initialState, action) => {
  switch (action.type) {
    case ADD_TO_CART_SUCCESS:{
      
      return Object.assign([], state, state.concat(action.payload))}

    case REMOVE_FROM_CART_SUCCESS: {
        let cartToBeMutated = state;
        if(cartToBeMutated[state.indexOf(action.payload)].count>1){
          cartToBeMutated[state.indexOf(action.payload)].count--;
        }
        else{
          cartToBeMutated.splice(state.indexOf(action.payload),1);
        }
        console.log(Object.assign([],state,cartToBeMutated))
        return Object.assign([],state,cartToBeMutated)
    }
    case ADD_TO_CART_FAILURE:{
      console.log(action.payload)
    }
    default:
      return state;
  }
};
